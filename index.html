<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Android App – Download APK</title>
  <meta name="description" content="Fast, safe download for the latest Android APK build." />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='48' fill='%230ea5e9'/%3E%3Ctext x='50' y='58' font-size='50' text-anchor='middle' fill='white' font-family='Arial, Helvetica, sans-serif'%3EA%3C/text%3E%3C/svg%3E" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .shadow-soft { box-shadow: 0 10px 30px rgba(2,6,23,.12); }
    .glass { backdrop-filter: blur(12px); background: rgba(255,255,255,.75); }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
  </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-800">
  <main class="max-w-3xl mx-auto px-6 py-12">
    <header class="mb-10 text-center">
      <h1 class="text-3xl md:text-4xl font-bold tracking-tight">My Android App</h1>
      <p class="mt-2 text-slate-600">Download the latest Android APK directly. No Play Store required.</p>
    </header>

    <!-- Release card -->
    <section class="glass shadow-soft rounded-2xl p-6 md:p-8">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-6">
        <div>
          <div class="flex items-center gap-3 flex-wrap">
            <span class="inline-flex items-center rounded-full bg-sky-100 text-sky-800 px-3 py-1 text-sm">Latest</span>
            <span class="inline-flex items-center rounded-full bg-slate-100 text-slate-700 px-3 py-1 text-sm">
              Version: <span id="version" class="ml-1 font-semibold">v1.0.0</span>
            </span>
            <span class="inline-flex items-center rounded-full bg-slate-100 text-slate-700 px-3 py-1 text-sm">
              Updated: <span id="updated" class="ml-1">2025-11-01</span>
            </span>
            <span class="inline-flex items-center rounded-full bg-slate-100 text-slate-700 px-3 py-1 text-sm">
              Min Android: <span class="ml-1">8.0 (API 26)</span>
            </span>
            <span id="dlBadge" class="hidden inline-flex items-center rounded-full bg-emerald-100 text-emerald-700 px-3 py-1 text-sm">
              Downloads: <span id="downloadCount" class="ml-1 font-semibold">0</span>
            </span>
          </div>

          <h2 class="mt-5 text-xl font-semibold">Direct download</h2>
          <p class="mt-1 text-slate-600">Tap the button on your Android device to install the APK. If asked, allow installs from your browser (Unknown sources).</p>

          <div class="mt-4 flex flex-wrap items-center gap-3">
            <!-- Fallback link (will be replaced by JS with the latest asset) -->
            <a id="downloadBtn" rel="noopener" href="https://github.com/Bayasgalan9999/myapp-download/releases/download/v1.0.0/BatteryDiagnostic-v1.0.0.apk"
               class="inline-flex items-center gap-2 rounded-xl bg-sky-600 hover:bg-sky-700 text-white font-semibold px-5 py-3 transition">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5"><path d="M12 16a1 1 0 0 0 .707-.293l3-3a1 1 0 0 0-1.414-1.414L13 12.586V4a1 1 0 1 0-2 0v8.586l-1.293-1.293A1 1 0 0 0 8.293 12.707l3 3A1 1 0 0 0 12 16Z"/><path d="M5 20a3 3 0 0 1-3-3v-1a1 1 0 1 1 2 0v1a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1a1 1 0 1 1 2 0v1a3 3 0 0 1-3 3H5Z"/></svg>
              Download APK
            </a>
            <a id="releaseNotesLink" rel="noopener" href="https://github.com/Bayasgalan9999/myapp-download/releases/tag/v1.0.0"
               class="text-sky-700 hover:text-sky-900 underline underline-offset-4">Release notes</a>
          </div>

          <div class="mt-4 text-sm text-slate-600">
            <div><span class="mono text-slate-800">SHA-256</span> checksum: <code class="mono" id="sha256">e31c9f649ca750f7bded150e56b0...</code></div>
            <div class="mt-1">File size: <span id="filesize">64.7 MB</span></div>
          </div>
        </div>

        <!-- QR code panel -->
        <div class="md:w-56 md:shrink-0 self-center text-center">
          <div class="text-sm text-slate-600 mb-2">Scan on your phone</div>
          <img id="qr" class="mx-auto rounded-xl border border-slate-200" width="224" height="224"
               alt="QR code to download APK"
               src="https://api.qrserver.com/v1/create-qr-code/?size=224x224&data=https://github.com/Bayasgalan9999/myapp-download/releases/download/v1.0.0/BatteryDiagnostic-v1.0.0.apk"/>
          <div class="text-xs text-slate-500 mt-2">If the QR doesn’t open, long-press and copy the link.</div>
        </div>
      </div>
    </section>

    <!-- Install help -->
    <section class="mt-10 grid md:grid-cols-2 gap-6">
      <div class="rounded-2xl bg-white shadow-soft p-6">
        <h3 class="text-lg font-semibold">How to install (Android)</h3>
        <ol class="list-decimal ml-5 mt-3 space-y-2 text-slate-700">
          <li>Open this page on your Android phone.</li>
          <li>Tap <strong>Download APK</strong>.</li>
          <li>When prompted, allow installs from your browser (“Unknown apps”).</li>
          <li>Open the downloaded file and tap <strong>Install</strong>.</li>
        </ol>
      </div>
      <div class="rounded-2xl bg-white shadow-soft p-6">
        <h3 class="text-lg font-semibold">Troubleshooting</h3>
        <ul class="list-disc ml-5 mt-3 space-y-2 text-slate-700">
          <li>If Play Protect warns you, tap <em>Install anyway</em> (you can verify the checksum above).</li>
          <li>If the download is blocked, open the link in Chrome on your phone.</li>
          <li>For updates, revisit this page; we’ll always point to the latest release.</li>
        </ul>
      </div>
    </section>

    <!-- Footer -->
    <footer class="mt-10 text-center text-sm text-slate-500">
      <p>© Your Organization. All rights reserved.</p>
    </footer>
  </main>

  <!-- Auto-fill from GitHub Releases -->
  <script>
    (async function () {
      const repo = "Bayasgalan9999/myapp-download";
      try {
        const res = await fetch(`https://api.github.com/repos/${repo}/releases/latest`, {
          headers: { "Accept": "application/vnd.github+json" }
        });
        if (!res.ok) return; // keep fallback
        const rel = await res.json();

        // Fill version/date
        const v = rel.tag_name || "v1.0.0";
        const dt = rel.published_at ? new Date(rel.published_at).toISOString().slice(0,10) : "";
        document.getElementById("version").textContent = v;
        if (dt) document.getElementById("updated").textContent = dt;

        // Find APK asset
        const asset = (rel.assets || []).find(a => /\.apk$/i.test(a.name));
        if (asset) {
          // Update download link + QR + size
          const url = asset.browser_download_url;
          document.getElementById("downloadBtn").href = url;
          document.getElementById("qr").src =
            `https://api.qrserver.com/v1/create-qr-code/?size=224x224&data=${encodeURIComponent(url)}`;
          document.getElementById("filesize").textContent =
            (asset.size / (1024*1024)).toFixed(1) + " MB";

          // Show download count badge
          if (typeof asset.download_count === "number") {
            document.getElementById("downloadCount").textContent = asset.download_count.toString();
            document.getElementById("dlBadge").classList.remove("hidden");
          }
        }
        // Release notes link
        if (rel.html_url) document.getElementById("releaseNotesLink").href = rel.html_url;
      } catch (e) {
        // silent fallback if API rate limit hits
      }
    })();
  </script>
</body>
</html>
